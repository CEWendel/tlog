#!/usr/bin/env ruby

require 'tlog'
require 'tlog/application'
require 'tlog/input'
require 'tlog/output'
#require 'rubygems'
#require 'commander/import'

=begin
# :name is optional, otherwise uses the basename of this executable
program :name, 'Foo Bar'
program :version, '1.0.0'
program :description, 'Stupid command that prints foo or bar.'

command :foo do |c|
  c.syntax = 'foobar foo'
  c.description = 'Displays foo'
  c.action do |args, options|
    say 'foo'
  end
end

command :bar do |c|
  c.syntax = 'foobar bar [options]'
  c.description = 'Display bar with optional prefix and suffix'
  c.option '--prefix STRING', String, 'Adds a prefix to bar'
  c.option '--suffix STRING', String, 'Adds a suffix to bar'
  c.action do |args, options|
    options.default :prefix => '(', :suffix => ')'
    say "#{options.prefix}bar#{options.suffix}"
  end
end
=end
#app = Tlog::App.new(ARGV.dup)
# exit(app.run)

#exit(shell.run(app))


input = Tlog::Input.new(ARGV.dup)
output = Tlog::Output.new($stdout, $stderr)
app = Tlog::Application.new(input,output)

exit(app.run)

=begin
input = Tlog::App::Input.new(ARGV.dup)
shell = Tlog::App::Shell.new

exit(shell.run(input))
=end

#puts Tlog.hi(ARGV[0])
